<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GED Ciencias 2025</title>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"></script>
<script src="https://js.stripe.com/v3/"></script>
<style>
  body{font-family:Arial,sans-serif;background:#f0f4f8;margin:0;padding-bottom:100px;}
  header{background:#1a73e8;color:white;text-align:center;padding:20px;font-size:24px;}
  .container{max-width:900px;margin:20px auto;background:white;padding:30px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.1);}
  .progress{height:10px;background:#ddd;border-radius:5px;margin:20px 0;overflow:hidden;}
  .progress-bar{height:100%;background:#1a73e8;width:0%;transition:0.5s;}
  .question{font-size:24px;margin:30px 0;line-height:1.5;}
  .options label{display:block;background:#f9f9f9;border:2px solid #eee;border-radius:12px;padding:18px;margin:15px 0;cursor:pointer;font-size:19px;transition:0.3s;}
  .options label:hover{border-color:#1a73e8;background:#eef7ff;}
  .options input{margin-right:15px;transform:scale(1.4);}
  button{background:#1a73e8;color:white;border:none;padding:18px 50px;font-size:20px;border-radius:12px;cursor:pointer;margin:30px auto;display:block;}
  #result{text-align:center;font-size:22px;margin:30px 0;font-weight:bold;}
  .banner{position:fixed;bottom:0;width:100%;background:white;padding:10px;text-align:center;box-shadow:0 -5px 15px rgba(0,0,0,0.1);z-index:999;}
  #paywall{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);color:white;text-align:center;padding-top:15%;z-index:9999;}
</style>
</head>
<body>

<header>GED Ciencias 2025</header>

<div class="container">
  <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
  <div style="text-align:center;margin:20px 0;font-size:18px;">
    Pregunta <span id="currentNum">1</span> de 34 | <span id="totalProgress">0 de 400 vistas</span>
  </div>
  <div class="question" id="questionText"></div>
  <div class="options" id="options"></div>
  <div id="result"></div>
  <button onclick="nextQuestion()">Siguiente pregunta →</button>
</div>

<div class="banner">
  <ins class="adsbygoogle" style="display:inline-block;width:320px;height:100px" data-ad-client="ca-pub-XXXXXXXXXXXXXXXX" data-ad-slot="XXXXXXXXXX"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>

<div id="paywall">
  <h1>¡Sesión completada!</h1>
  <h2>Desbloquea todo por solo $5/mes</h2>
  <button onclick="loginGoogle()" style="background:#4285f4;padding:15px 40px;margin:20px;font-size:20px;border:none;color:white;border-radius:12px;">Iniciar con Google</button>
  <button onclick="buyPremium()" style="background:#34a853;padding:15px 40px;margin:20px;font-size:20px;border:none;color:white;border-radius:12px;">Comprar Premium</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getAuth, onAuthStateChanged, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDN8cjfe2DvIgadP0j_B-pCNuTEL6v2Kak",
  authDomain: "ged-ciencias-premium-2025.firebaseapp.com",
  projectId: "ged-ciencias-premium-2025",
  storageBucket: "ged-ciencias-premium-2025.firebasestorage.app",
  messagingSenderId: "394447234800",
  appId: "1:394447234800:web:1e58f3a179f821ffbf0435"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

let allQuestions = [
  { q: "¿Qué glándula produce adrenalina?", a: "Glándulas suprarrenales", options: ["Tiroides","Páncreas","Hipófisis","Glándulas suprarrenales"] },
  { q: "¿Cuál es la unidad básica de la vida?", a: "Célula", options: ["Átomo","Molécula","Célula","Tejido"] },
  { q: "¿Qué gas respiran las plantas por la noche?", a: "Oxígeno", options: ["Oxígeno","Dióxido de carbono","Nitrógeno","Hidrógeno"] },
  // PON AQUÍ TUS 397 PREGUNTAS RESTANTES
];

let currentSession = [], currentIndex = 0;

function shuffle(array) { return array.sort(() => Math.random() - 0.5); }

function startQuiz() {
  currentSession = shuffle([...allQuestions]).slice(0, 34);
  currentIndex = 0;
  document.getElementById("progressBar").style.width = "0%";
  loadQuestion();
}

function loadQuestion() {
  if (currentIndex >= 34) {
    document.getElementById("paywall").style.display = "block";
    return;
  }
  const q = currentSession[currentIndex];
  document.getElementById("questionText").textContent = q.q;
  document.getElementById("options").innerHTML = q.options.map(opt => `
    <label><input type="radio" name="ans" value="${opt}"> ${opt}</label>
  `).join("");
  document.getElementById("result").innerHTML = "";
  document.getElementById("currentNum").textContent = currentIndex + 1;
  document.getElementById("progressBar").style.width = ((currentIndex + 1) / 34 * 100) + "%";
  document.getElementById("totalProgress").textContent = `${currentIndex + 1} de 400 vistas`;
}

window.nextQuestion = () => {
  const selected = document.querySelector('input[name="ans"]:checked');
  if (!selected) return alert("¡Elige una opción!");
  const correct = selected.value === currentSession[currentIndex].a;
  document.getElementById("result").innerHTML = correct ? 
    '<span style="color:green">¡Correcto!</span>' : 
    `<span style="color:red">Incorrecto. Correcta: ${currentSession[currentIndex].a}</span>`;
  currentIndex++;
  setTimeout(loadQuestion, 1800);
};

window.loginGoogle = async () => {
  const provider = new GoogleAuthProvider();
  await signInWithPopup(auth, provider);
};

onAuthStateChanged(auth, (user) => { if (user) document.getElementById("paywall").style.display = "none"; });

startQuiz();
</script>
</body>
</html>

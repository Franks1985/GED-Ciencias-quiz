<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GED Ciencias 2026 - 400 Preguntas Gratis</title>
  <meta name="description" content="Simulador GED Ciencias 2025 totalmente GRATIS con 400 preguntas reales oficiales. Sin registro, sin límites.">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Google Sans',Arial,sans-serif;background:#f0f4f8;padding-bottom:120px;color:#333}
    header{background:#1a73e8;color:white;text-align:center;padding:25px 15px}
    header h1{font-size:28px;margin:0}
    .container{max-width:950px;margin:25px auto;padding:30px;background:white;border-radius:20px;box-shadow:0 12px 40px rgba(0,0,0,0.15)}
    .progress{height:10px;background:#e8ecf4;border-radius:6px;margin:25px 0;overflow:hidden}
    .progress-bar{height:100%;background:linear-gradient(90deg,#1a73e8,#34a853);width:0%;transition:width .5s}
    .session-info{text-align:center;font-size:18px;color:#555;margin:20px 0}
    .visits-counter{text-align:center;font-size:16px;color:#666;margin:10px 0; font-weight:bold}
    .question{font-size:24px;line-height:1.6;margin:35px 0;color:#333;font-weight:500}
    .options{margin:20px 0}
    .options label{display:block;background:#f8f9fa;border:2px solid #e8ecf4;border-radius:16px;padding:20px;margin:18px 0;cursor:pointer;font-size:20px;transition:all .3s}
    .options label:hover{border-color:#1a73e8;background:#eef4ff;transform:translateY(-2px);box-shadow:0 4px 15px rgba(26,115,232,.15)}
    .options input[type="radio"]{margin-right:18px;transform:scale(1.5);accent-color:#1a73e8}
    button{background:linear-gradient(135deg,#1a73e8,#0d47a1);color:white;border:none;padding:20px 60px;font-size:22px;border-radius:16px;cursor:pointer;display:block;margin:35px auto;font-weight:bold;box-shadow:0 6px 20px rgba(26,115,232,.3);transition:all .2s}
    button:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(26,115,232,.4)}
    #result{text-align:center;font-size:24px;font-weight:bold;margin:40px 0;padding:20px;border-radius:12px}
    .correct{background:#d4edda;color:#155724;border:2px solid #c3e6cb}
    .incorrect{background:#f8d7da;color:#721c24;border:2px solid #f5c6cb}
    .banner{position:fixed;bottom:0;left:0;width:100%;background:white;text-align:center;padding:15px;box-shadow:0 -6px 20px rgba(0,0,0,.12);z-index:9999;border-top:3px solid #1a73e8}
    .complete-message{background:#e8f5e8;border:2px solid #4caf50;border-radius:12px;padding:25px;margin:30px 0;text-align:center;font-size:22px;color:#2e7d32}
  </style>
</head>
<body>
<header>
  <h1>GED Ciencias 2026 - 400 Preguntas GRATIS</h1>
</header>
<div class="container">
  <div class="visits-counter" id="visitsCounter">Visitas a esta página: Cargando...</div>
  <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
  <div class="session-info">
    <strong>Sesión de 34 preguntas</strong> |
    <span id="currentNum">1</span> de 34 |
    <span id="totalProgress">0 de 400 Preguntas</span>
  </div>
 
  <div class="question" id="questionText">Cargando pregunta...</div>
  <div class="options" id="options"></div>
  <div id="result"></div>
  <button id="nextBtn" onclick="nextQuestion()">Siguiente pregunta</button>
</div>
<div class="banner">
  <div style="font-size:14px;color:#666;margin-bottom:8px">Anuncios que apoyan tu preparación</div>
  <ins class="adsbygoogle"
       style="display:inline-block;width:320px;height:100px"
       data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
       data-ad-slot="1234567890"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>

<script src="questions.js"></script>
<script>
  let currentSession = [];
  let currentIndex = 0;
  let usedQuestions = new Set(JSON.parse(localStorage.getItem('ged_ciencias_2025_used') || '[]'));

  // === CONTADOR DE VISITAS ===
  function updateVisitCounter() {
    let visits = parseInt(localStorage.getItem('ged_ciencias_visits') || '0') + 1;
    localStorage.setItem('ged_ciencias_visits', visits);
    document.getElementById('visitsCounter').textContent = `Visitas a esta página: ${visits}`;
  }

  // === GUARDAR PROGRESO ===
  function saveProgress() {
    localStorage.setItem('ged_ciencias_2025_used', JSON.stringify([...usedQuestions]));
  }

  // === NUEVA SESIÓN ===
  function newSession() {
    let availableIndices = [];
    for (let i = 0; i < allQuestions.length; i++) {
      if (!usedQuestions.has(i)) availableIndices.push(i);
    }

    if (availableIndices.length < 34) {
      usedQuestions = new Set();
      saveProgress();
      availableIndices = Array.from({length: allQuestions.length}, (_, i) => i);
    }

    // Mezclar y tomar 34 índices
    for (let i = availableIndices.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [availableIndices[i], availableIndices[j]] = [availableIndices[j], availableIndices[i]];
    }

    currentSession = availableIndices.slice(0, 34);
    currentIndex = 0;
    updateProgress();
    loadQuestion();
    document.getElementById('nextBtn').textContent = "Siguiente pregunta";
    document.getElementById('nextBtn').onclick = nextQuestion;
  }

  // === ACTUALIZAR PROGRESO ===
  function updateProgress() {
    const pct = ((currentIndex + 1) / 34) * 100;
    document.getElementById("progressBar").style.width = pct + "%";
    document.getElementById("currentNum").textContent = currentIndex + 1;
    document.getElementById("totalProgress").textContent = `${usedQuestions.size + currentIndex + 1} de 400 vistas`;
  }

  // === CARGAR PREGUNTA ===
  function loadQuestion() {
    if (currentIndex >= currentSession.length) {
      document.getElementById("result").innerHTML = `<div class="complete-message">
        <h2>¡Sesión completada!</h2>
        <p>Has visto <strong>${usedQuestions.size + 34}</strong> de 400 preguntas únicas.</p>
        <p>Puedes cerrar la página y volver cuando quieras. Tu progreso está guardado.</p>
      </div>`;
      document.getElementById('nextBtn').textContent = "Nueva sesión";
      document.getElementById('nextBtn').onclick = newSession;
      return;
    }

    const questionIndexInAll = currentSession[currentIndex]; // Índice real en allQuestions
    const q = allQuestions[questionIndexInAll];

    document.getElementById("questionText").innerHTML = `<strong>Pregunta ${currentIndex + 1}:</strong> ${q.q}`;
    document.getElementById("options").innerHTML = q.options.map(o => `
      <label>
        <input type="radio" name="ans" value="${o}">
        <span>${o}</span>
      </label>
    `).join('');
    document.getElementById("result").innerHTML = "";
  }

  // === SIGUIENTE PREGUNTA ===
  window.nextQuestion = () => {
    const selected = document.querySelector('input[name="ans"]:checked');
    if (!selected) return alert("¡Selecciona una respuesta!");

    const questionIndexInAll = currentSession[currentIndex];
    const correctAnswer = allQuestions[questionIndexInAll].a;
    const correct = selected.value === correctAnswer;

    // Marcar respuesta correcta/incorrecta visualmente
    document.querySelectorAll('.options label').forEach(label => {
      const input = label.querySelector('input');
      if (input.value === correctAnswer) {
        label.style.cssText = "background:#d4edda !important; border-color:#4caf50 !important;";
      } else if (input.checked) {
        label.style.cssText = "background:#f8d7da !important; border-color:#f44336 !important;";
      }
      input.disabled = true;
    });

    document.getElementById("result").innerHTML = correct
      ? '<div class="correct">¡Correcto! ✓</div>'
      : `<div class="incorrect">Incorrecto ✗<br>Respuesta correcta: <strong>${correctAnswer}</strong></div>`;

    // Marcar como vista usando el índice real
    usedQuestions.add(questionIndexInAll);
    saveProgress();

    currentIndex++;
    updateProgress();
    setTimeout(loadQuestion, 2500);
  };

  // === INICIAR ===
  updateVisitCounter(); // Contador de visitas
  if (usedQuestions.size >= allQuestions.length - 1) { // -1 por la pregunta final de felicitaciones
    usedQuestions = new Set();
    saveProgress();
  }
  newSession();
</script>
</body>
</html>

